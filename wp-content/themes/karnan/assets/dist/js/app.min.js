!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(o){return t(o,e,e.document)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),e,e.document):t(jQuery,e,e.document)}("undefined"!=typeof window?window:this,function(e,t,o,n){"use strict";function i(o,n,i,a){if(m===o&&(i=!1),D===!0)return!0;if(f[o]){if(E=!1,i&&N.before(o,p),y=1,O=d[o],x===!1&&m>o&&a===!1&&g[o]&&(y=parseInt(p[o].outerHeight()/w.height()),O=parseInt(d[o])+(p[o].outerHeight()-w.height())),N.updateHash&&N.sectionName&&(x!==!0||0!==o))if(history.pushState)try{history.replaceState(null,null,f[o])}catch(r){t.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else t.location.hash=f[o];if(x&&(N.afterRender(),x=!1),m=o,n)e(N.target).stop().scrollTop(O),i&&N.after(o,p);else{if(M=!0,e().velocity?e(N.target).stop().velocity("scroll",{duration:N.scrollSpeed,easing:N.easing,offset:O,mobileHA:!1}):e(N.target).stop().animate({scrollTop:O},N.scrollSpeed,N.easing),t.location.hash.length&&N.sectionName&&t.console)try{e(t.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(r){}e(N.target).promise().done(function(){M=!1,x=!1,i&&N.after(o,p)})}}}function a(e){function t(t){for(var o=0,n=e.slice(Math.max(e.length-t,1)),i=0;i<n.length;i++)o+=n[i];return Math.ceil(o/t)}var o=t(10),n=t(70);return o>=n}function r(e,t){for(var o=f.length;o>=0;o--)"string"==typeof e?f[o]===e&&(v=o,i(o,t,!0,!0)):o===e&&(v=o,i(o,t,!0,!0))}var s,c,l,h,u,d=[],f=[],p=[],g=[],v=0,m=0,y=1,S=!1,w=e(t),b=w.scrollTop(),E=!1,M=!1,H=!1,D=!1,k=[],T=(new Date).getTime(),x=!0,I=!1,O=0,C="onwheel"in o?"wheel":o.onmousewheel!==n?"mousewheel":"DOMMouseScroll",N={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},R=function(n){function r(t){e().velocity?e(N.target).stop().velocity("scroll",{duration:N.scrollSpeed,easing:N.easing,offset:t,mobileHA:!1}):e(N.target).stop().animate({scrollTop:t},N.scrollSpeed,N.easing)}function m(t){t&&(b=w.scrollTop());var o=N.section;g=[],N.interstitialSection.length&&(o+=","+N.interstitialSection),N.scrollbars===!1&&(N.overflowScroll=!1),e(o).each(function(t){var o=e(this);N.setHeights?o.is(N.interstitialSection)?g[t]=!1:o.css("height","auto").outerHeight()<w.height()||"hidden"===o.css("overflow")?(o.css({height:w.height()}),g[t]=!1):(o.css({height:o.height()}),N.overflowScroll?g[t]=!0:g[t]=!1):o.outerHeight()<w.height()||N.overflowScroll===!1?g[t]=!1:g[t]=!0}),t&&w.scrollTop(b)}function x(o,n){var a=N.section;N.interstitialSection.length&&(a+=","+N.interstitialSection),d=[],f=[],p=[],e(a).each(function(o){var n=e(this);o>0?d[o]=parseInt(n.offset().top)+N.offset:d[o]=parseInt(n.offset().top),N.sectionName&&n.data(N.sectionName)?f[o]="#"+n.data(N.sectionName).toString().replace(/ /g,"-"):n.is(N.interstitialSection)===!1?f[o]="#"+(o+1):(f[o]="#",o===e(a).length-1&&o>1&&(d[o]=d[o-1]+(parseInt(e(e(a)[o-1]).outerHeight())-parseInt(e(t).height()))+parseInt(n.outerHeight()))),p[o]=n;try{e(f[o]).length&&t.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(i){}t.location.hash===f[o]&&(v=o,S=!0)}),!0===o&&i(v,!1,!1,!1)}function O(){return!g[v]||(b=w.scrollTop(),!(b>parseInt(d[v])))}function R(){return!g[v]||(b=w.scrollTop(),!(b<parseInt(d[v])+(p[v].outerHeight()-w.height())-28))}I=!0,e.easing.easeOutExpo=function(e,t,o,n,i){return t==i?o+n:n*(-Math.pow(2,-10*t/i)+1)+o},l={handleMousedown:function(){return D===!0||(E=!1,void(H=!1))},handleMouseup:function(){return D===!0||(E=!0,void(H&&l.calculateNearest(!1,!0)))},handleScroll:function(){return D===!0||(s&&clearTimeout(s),void(s=setTimeout(function(){return H=!0,E!==!1&&(E=!1,void l.calculateNearest(!1,!0))},200)))},calculateNearest:function(e,t){b=w.scrollTop();for(var o,n=1,a=d.length,r=0,s=Math.abs(d[0]-b);n<a;n++)o=Math.abs(d[n]-b),o<s&&(s=o,r=n);(R()&&r>v||O())&&(v=r,i(r,e,t,!1))},wheelHandler:function(o){if(D===!0)return!0;if(N.standardScrollElements&&(e(o.target).is(N.standardScrollElements)||e(o.target).closest(N.standardScrollElements).length))return!0;g[v]||o.preventDefault();var n=(new Date).getTime();o=o||t.event;var r=o.originalEvent.wheelDelta||-o.originalEvent.deltaY||-o.originalEvent.detail,s=Math.max(-1,Math.min(1,r));if(k.length>149&&k.shift(),k.push(Math.abs(r)),n-T>200&&(k=[]),T=n,M)return!1;if(s<0){if(v<d.length-1&&R()){if(!a(k))return!1;o.preventDefault(),v++,M=!0,i(v,!1,!0,!1)}}else if(s>0&&v>0&&O()){if(!a(k))return!1;o.preventDefault(),v--,M=!0,i(v,!1,!0,!1)}},keyHandler:function(e){return D===!0||o.activeElement.readOnly===!1||M!==!0&&void(38==e.keyCode||33==e.keyCode?v>0&&O()&&(e.preventDefault(),v--,i(v,!1,!0,!1)):40!=e.keyCode&&34!=e.keyCode||v<d.length-1&&R()&&(e.preventDefault(),v++,i(v,!1,!0,!1)))},init:function(){N.scrollbars?(w.on("mousedown",l.handleMousedown),w.on("mouseup",l.handleMouseup),w.on("scroll",l.handleScroll)):e("body").css({overflow:"hidden"}),w.on(C,l.wheelHandler),w.on("keydown",l.keyHandler)}},h={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(t){if(D===!0)return!0;if(N.standardScrollElements&&(e(t.target).is(N.standardScrollElements)||e(t.target).closest(N.standardScrollElements).length))return!0;var o;if("undefined"!=typeof t&&"undefined"!=typeof t.touches)switch(o=t.touches[0],t.type){case"touchstart":h.touches.touchstart.y=o.pageY,h.touches.touchmove.y=-1,h.touches.touchstart.x=o.pageX,h.touches.touchmove.x=-1,h.options.timeStamp=(new Date).getTime(),h.touches.touchend=!1;case"touchmove":h.touches.touchmove.y=o.pageY,h.touches.touchmove.x=o.pageX,h.touches.touchstart.y!==h.touches.touchmove.y&&Math.abs(h.touches.touchstart.y-h.touches.touchmove.y)>Math.abs(h.touches.touchstart.x-h.touches.touchmove.x)&&(t.preventDefault(),h.touches.direction="y",h.options.timeStamp+h.options.timeGap<(new Date).getTime()&&0==h.touches.touchend&&(h.touches.touchend=!0,h.touches.touchstart.y>-1&&Math.abs(h.touches.touchmove.y-h.touches.touchstart.y)>h.options.distance&&(h.touches.touchstart.y<h.touches.touchmove.y?h.up():h.down())));break;case"touchend":h.touches[t.type]===!1&&(h.touches[t.type]=!0,h.touches.touchstart.y>-1&&h.touches.touchmove.y>-1&&"y"===h.touches.direction&&(Math.abs(h.touches.touchmove.y-h.touches.touchstart.y)>h.options.distance&&(h.touches.touchstart.y<h.touches.touchmove.y?h.up():h.down()),h.touches.touchstart.y=-1,h.touches.touchstart.x=-1,h.touches.direction="undetermined"))}},down:function(){v<d.length&&(R()&&v<d.length-1?(v++,i(v,!1,!0,!1)):Math.floor(p[v].height()/w.height())>y?(r(parseInt(d[v])+w.height()*y),y+=1):r(parseInt(d[v])+(p[v].outerHeight()-w.height())))},up:function(){v>=0&&(O()&&v>0?(v--,i(v,!1,!0,!1)):y>2?(y-=1,r(parseInt(d[v])+w.height()*y)):(y=1,r(parseInt(d[v]))))},init:function(){o.addEventListener&&N.touchScroll&&(o.addEventListener("touchstart",h.touchHandler,!1),o.addEventListener("touchmove",h.touchHandler,!1),o.addEventListener("touchend",h.touchHandler,!1))}},u={refresh:function(e,t){clearTimeout(c),c=setTimeout(function(){m(!0),x(t,!1),e&&N.afterResize()},400)},handleUpdate:function(){u.refresh(!1,!1)},handleResize:function(){u.refresh(!0,!1)},handleOrientation:function(){u.refresh(!0,!0)}},N=e.extend(N,n),m(!1),x(!1,!0),!0===S?i(v,!1,!0,!0):setTimeout(function(){l.calculateNearest(!0,!1)},200),d.length&&(l.init(),h.init(),w.on("resize",u.handleResize),o.addEventListener&&t.addEventListener("orientationchange",u.handleOrientation,!1))};return R.move=function(t){return t!==n&&(t.originalEvent&&(t=e(this).attr("href")),void r(t,!1))},R.instantMove=function(e){return e!==n&&void r(e,!0)},R.next=function(){v<f.length&&(v+=1,i(v,!1,!0,!0))},R.previous=function(){v>0&&(v-=1,i(v,!1,!0,!0))},R.instantNext=function(){v<f.length&&(v+=1,i(v,!0,!0,!0))},R.instantPrevious=function(){v>0&&(v-=1,i(v,!0,!0,!0))},R.destroy=function(){return!!I&&(N.setHeights&&e(N.section).each(function(){e(this).css("height","auto")}),w.off("resize",u.handleResize),N.scrollbars&&(w.off("mousedown",l.handleMousedown),w.off("mouseup",l.handleMouseup),w.off("scroll",l.handleScroll)),w.off(C,l.wheelHandler),w.off("keydown",l.keyHandler),o.addEventListener&&N.touchScroll&&(o.removeEventListener("touchstart",h.touchHandler,!1),o.removeEventListener("touchmove",h.touchHandler,!1),o.removeEventListener("touchend",h.touchHandler,!1)),d=[],f=[],p=[],void(g=[]))},R.update=function(){return!!I&&void u.handleUpdate()},R.current=function(){return p[v]},R.currentIndex=function(){return v},R.disable=function(){D=!0},R.enable=function(){D=!1,I&&l.calculateNearest(!1,!1)},R.isDisabled=function(){return D},R.setOptions=function(o){return!!I&&void("object"==typeof o?(N=e.extend(N,o),u.handleUpdate()):t.console&&console.warn("Scrollify warning: setOptions expects an object."))},e.scrollify=R,R});var Karnan;Karnan=Karnan||{},Karnan.OnePage=Karnan.OnePage||{},Karnan.OnePage.ScrollSnapping=function(e){function t(){e(".onepage-section").length&&this.StartSections(),e(".virtual-section").length&&this.StartSections()}var o=3e3;t.prototype.StartSections=function(){e.scrollify({section:".onepage-section",sectionName:"section-name",scrollSpeed:o,before:function(t,n){this.hightlightPagination(t,n),this.hightlightDirectionArrows(t,n),e(document).trigger("scrollifyStart",[t,n,o])}.bind(this),after:function(t,n){e(document).trigger("scrollifyStop",[t,n,o])}.bind(this)}),this.bindSoftMove(),this.hightlightDirectionArrows(0,e(".onepage-section").length)},t.prototype.VirtualSections=function(){e.scrollify({section:".virtual-section",sectionName:"section-name",scrollSpeed:550,before:function(t,o){e(".container","section").not(":eq("+t+")").fadeOut(100),e(".container","section:eq("+t+")").fadeIn(800),this.hightlightPagination(t,o),this.hightlightDirectionArrows(t,o)}.bind(this),after:function(e,t){}.bind(this)}),this.bindInstantMove(),this.hightlightDirectionArrows(0,e(".virtual-section").length)}.bind(this),t.prototype.hightlightDirectionArrows=function(e,t){0==e?jQuery(".scroll-action.scroll-up").addClass("disabled"):jQuery(".scroll-action.scroll-up").removeClass("disabled"),t==e+1?jQuery(".scroll-action.scroll-down").addClass("disabled"):jQuery(".scroll-action.scroll-down").removeClass("disabled")}.bind(this),t.prototype.hightlightPagination=function(t,o){e("#one-page-elevator li").removeClass("active"),e("#one-page-elevator li:eq("+t+")").addClass("active")},t.prototype.bindSoftMove=function(){e("#one-page-elevator a").on("click",function(){e("body").hasClass("lock-scroll")||e.scrollify.move(e(this).attr("href"))})},t.prototype.bindInstantMove=function(){e("#one-page-elevator a").on("click",function(){e("body").hasClass("lock-scroll")||e.scrollify.instantMove(e(this).attr("href"))})},new t}(jQuery),Karnan=Karnan||{},Karnan.OnePage=Karnan.OnePage||{},Karnan.OnePage.Video=function(e){function t(){this.videoElement=document.getElementById(o),this.videoElement.addEventListener("loadedmetadata",function(){this.videoDuration=this.videoElement.duration,this.videoElement.playbackRate=n}.bind(this)),e(document).bind("scrollifyStart",function(e,t,o,n){this.lockScroll(),i<t?this.play(t,o,n):this.rewind(t,o,n),i=t}.bind(this)),e(document).bind("scrollifyStop",function(e,t,o,n){this.stop(t,o,n),this.unlockScroll()}.bind(this))}var o="one-page-video-player",n=10,i=0;t.prototype.play=function(t,o,n){this.videoElement.currentTime=this.calculateMilestone(this.videoDuration,e(o).length,t),this.videoElement.playbackRate=this.calculateSpeed(this.videoDuration,e(o).length,n),console.log("Play",this.videoElement.playbackRate),this.videoElement.play()},t.prototype.rewind=function(t,o,n){this.videoElement.currentTime=this.calculateMilestone(this.videoDuration,e(o).length,t+1),this.videoElement.playbackRate=-Math.abs(this.calculateSpeed(this.videoDuration,e(o).length,n)),console.log("Rewind",this.videoElement.playbackRate),this.videoElement.play()},t.prototype.stop=function(e,t,o){this.videoElement.pause()},t.prototype.calculateMilestone=function(e,t,o){return e/t*o},t.prototype.calculateSpeed=function(e,t,o){return e/t/o*1e3},t.prototype.lockScroll=function(t,o,n){e("body").addClass("lock-scroll")},t.prototype.unlockScroll=function(t,o,n){e("body").removeClass("lock-scroll")},new t}(jQuery);